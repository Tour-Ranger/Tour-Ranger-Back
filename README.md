[![develop CI check](https://github.com/Tour-Ranger/Tour-Ranger-Back/actions/workflows/develop-ci.yml/badge.svg)](https://github.com/Tour-Ranger/Tour-Ranger-Back/actions/workflows/develop-ci.yml)
[![main-CD](https://github.com/Tour-Ranger/Tour-Ranger-Back/actions/workflows/main-cd.yml/badge.svg)](https://github.com/Tour-Ranger/Tour-Ranger-Back/actions/workflows/main-cd.yml)
[![main-CD-elb](https://github.com/Tour-Ranger/Tour-Ranger-Back/actions/workflows/main-cd-elb.yml/badge.svg)](https://github.com/Tour-Ranger/Tour-Ranger-Back/actions/workflows/main-cd-elb.yml)

# âœˆï¸ Tour-Ranger âœˆï¸

### ğŸ”° ë„ˆì˜ ì—¬í–‰ì„ ì§€ì¼œì¤„ê²Œ

í”„ë¡œì íŠ¸ ê¸°ê°„ : 2023/8/16 ~ 2023/09/18

ì—¬í–‰ ìƒí’ˆ ì£¼ë¬¸ ì„œë¹„ìŠ¤

1. ëŒ€ëŸ‰ì˜ íŠ¸ë˜í”½ì´ ë°œìƒí•  ê²ƒìœ¼ë¡œ ì˜ˆìƒë˜ëŠ” ì´ë²¤íŠ¸ ì—¬í–‰ ìƒí’ˆ(ì´ˆíŠ¹ê°€ íƒ€ì„ë”œ) í˜ì´ì§€
2. ëŒ€ëŸ‰ì˜ ì—¬í–‰ íŒ¨í‚¤ì§€ ë°ì´í„°(ì²œë§Œ ê±´)ì—ì„œ ê²€ìƒ‰ìœ¼ë¡œ í•„ìš”í•œ ì—¬í–‰íŒ¨í‚¤ì§€ë¥¼ ë¹ ë¥¸ ì‹œê°„ ë‚´ì— ì°¾ì„ ìˆ˜ ìˆê²Œ í•œë‹¤.

<p align="center">
  <img src="https://github.com/Tour-Ranger/Tour-Ranger-Back/assets/130378232/bc807b8a-b684-415a-bc02-caf9a47e6177" height=300px>&nbsp;&nbsp;&nbsp;&nbsp;
  <img src="https://github.com/Tour-Ranger/Tour-Ranger-Back/assets/130378232/97c8669b-b5ce-4bd7-af51-4c683a2ffde5" height=300px>
</p>

### [ğŸ“š íŒŒì›Œë ˆì¸ì¡° Team Notion ë³´ëŸ¬ê°€ê¸°](https://power-ranzor.notion.site/0c0bd4b042de406e96b3e42b0dde3460?pvs=4)

### [ğŸ“„ ë°œí‘œ ë³´ê³ ì„œ ë³´ëŸ¬ê°€ê¸°](https://power-ranzor.notion.site/MVP-d338ce51977c42b7b0daa2340cae2167?pvs=4)

<br>

## ğŸ¤ Project Members

<p align="center">
  <img src="https://github.com/Tour-Ranger/Tour-Ranger-Back/assets/130378232/7a61f6bf-f7a6-4700-901a-89578bfa352e" width=500px>
</p>

|ì´ë¦„|ê¹ƒí—ˆë¸Œ|
|---|---|
|ì„œì˜ˆë¦°|https://github.com/yesrin|
|ì¡°ìš°ì§„|https://github.com/VVooJIN3|
|ìµœì •ì€|https://github.com/jungeun5-choi|
|í‘œì§€ìˆ˜|https://github.com/JisooPyo|

<br>

## Architecture

<p align="center">
  <img src="https://github.com/Tour-Ranger/Tour-Ranger-Back/assets/130378232/f26aa660-d395-4cd5-b2f2-85ff8ee5e8d6">
</p>

## ERD

<p align="center">
  <img src="https://github.com/Tour-Ranger/Tour-Ranger-Back/assets/130378232/b17109be-d960-4d6a-8835-309f328f9798" width=800px>
</p>

<br>

## ê¸°ìˆ  ìŠ¤íƒ

**Back**

<img src="https://img.shields.io/badge/Java-007396?style=for-the-badge&logo=OpenJDK&logoColor=white"><img src="https://img.shields.io/badge/Spring-6DB33F?style=for-the-badge&logo=spring&logoColor=white"><img src="https://img.shields.io/badge/Spring Boot-6DB33F?style=for-the-badge&logo=springboot&logoColor=white"><img src="https://img.shields.io/badge/Gradle-02303A?style=for-the-badge&logo=gradle&logoColor=white"><img src="https://img.shields.io/badge/MySQL-4479A1?style=for-the-badge&logo=mysql&logoColor=white"><img src="https://img.shields.io/badge/Spring Security-6DB33F?style=for-the-badge&logo=springsecurity&logoColor=white"><img src="https://img.shields.io/badge/Redis-DC382D?style=for-the-badge&logo=redis&logoColor=white">
<br>
<img src="https://img.shields.io/badge/nGrinder-DA742F?style=for-the-badge&logo=&logoColor=white"><img src="https://img.shields.io/badge/GitHub Actions-2088FF?style=for-the-badge&logo=githubactions&logoColor=white"><img src="https://img.shields.io/badge/Amazon AWS-232F3E?style=for-the-badge&logo=amazonaws&logoColor=white"><img src="https://img.shields.io/badge/Amazon S3-569A31?style=for-the-badge&logo=amazons3&logoColor=white"><img src="https://img.shields.io/badge/Amazon EC2-FF9900?style=for-the-badge&logo=amazonec2&logoColor=white"><img src="https://img.shields.io/badge/Amazon CodeDeploy-569A31?style=for-the-badge&logo=&logoColor=white">
<br>
<img src="https://img.shields.io/badge/Amazon RDS-527FFF?style=for-the-badge&logo=amazonrds&logoColor=white"><img src="https://img.shields.io/badge/Amazon CloudWatch-FF4F8B?style=for-the-badge&logo=amazoncloudwatch&logoColor=white"><img src="https://img.shields.io/badge/Amazon ELB-005571?style=for-the-badge&logo=&logoColor=white">
<br>

**Front**

<img src="https://img.shields.io/badge/HTML5-E34F26?style=for-the-badge&logo=html5&logoColor=white"><img src="https://img.shields.io/badge/CSS-1572B6?style=for-the-badge&logo=css3&logoColor=white"><img src="https://img.shields.io/badge/JavaScript-F7DF1E?style=for-the-badge&logo=javascript&logoColor=black"><img src="https://img.shields.io/badge/Bootstrap-7952B3?style=for-the-badge&logo=bootstrap&logoColor=black">
<br>

**Tool**

<img src="https://img.shields.io/badge/IntelliJ IDEA-000000?style=for-the-badge&logo=IntelliJ IDEA&logoColor=white"><img src="https://img.shields.io/badge/Github-181717?style=for-the-badge&logo=github&logoColor=white"><img src="https://img.shields.io/badge/git-F05032?style=for-the-badge&logo=git&logoColor=white"><img src="https://img.shields.io/badge/Slack-4A154B?style=for-the-badge&logo=Slack&logoColor=white">
<br>

**Crawling**

<img src="https://img.shields.io/badge/Python-3776AB?style=for-the-badge&logo=python&logoColor=white"><img src="https://img.shields.io/badge/Selenium-43B02A?style=for-the-badge&logo=selenium&logoColor=white">
<br>

###### ê¸°ìˆ ë„ì…ë°°ê²½ì€ ë°œí‘œë³´ê³ ì„œì— ìƒì„¸íˆ ê¸°ë¡ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

<br>

## íŠ¸ëŸ¬ë¸” ìŠˆíŒ…

<details>
<summary>ëª©ì°¨</summary>

1. [SQL - ê²€ìƒ‰ ì‹œ ì‚¬ìš©ìê°€ ì„ íƒí•œ ì¡°ê±´ì˜ ì¡°í•©ì— ë”°ë¥¸ ì¿¼ë¦¬ ì ìš© ë°©ë²• ê³ ë¯¼](https://github.com/Tour-Ranger/Tour-Ranger-Back/tree/docs/70/readme#1-sql--%EA%B2%80%EC%83%89-%EC%8B%9C-%EC%82%AC%EC%9A%A9%EC%9E%90%EA%B0%80-%EC%84%A0%ED%83%9D%ED%95%9C-%EC%A1%B0%EA%B1%B4%EC%9D%98-%EC%A1%B0%ED%95%A9%EC%97%90-%EB%94%B0%EB%A5%B8-%EC%BF%BC%EB%A6%AC-%EC%A0%81%EC%9A%A9-%EB%B0%A9%EB%B2%95-%EA%B3%A0%EB%AF%BC)
2. [ë™ì‹œì„± ì œì–´ - í•œì • ìƒí’ˆ ë™ì‹œ ì£¼ë¬¸ì— ëŒ€í•œ ë°ì´í„° ì •í™•ì„± í™•ë³´](###2.-ë™ì‹œì„±-ì œì–´---í•œì •-ìƒí’ˆ-ë™ì‹œ-ì£¼ë¬¸ì—-ëŒ€í•œ-ë°ì´í„°-ì •í™•ì„±-í™•ë³´)
3. [ë©€í‹°ìŠ¤ë ˆë“œ ì‚¬ìš©ìœ¼ë¡œ CPU ì‚¬ìš©ë¥ (%) ê°œì„ ](###3.-ë©€í‹°ìŠ¤ë ˆë“œ-ì‚¬ìš©ìœ¼ë¡œ-CPU-ì‚¬ìš©ë¥ (%)-ê°œì„ )
4. [ë‹¤ì¤‘ ì„œë²„ì—ì„œ ì„¸ì…˜ ê´€ë¦¬](###4.-ë‹¤ì¤‘-ì„œë²„ì—ì„œ-ì„¸ì…˜-ê´€ë¦¬)
5. [AWS ë°°í¬ ì„œë²„ ì¤‘ë‹¨ ë¬¸ì œ](###5.-AWS-ë°°í¬-ì„œë²„-ì¤‘ë‹¨-ë¬¸ì œ)

</details>

### 1. SQL : ê²€ìƒ‰ ì‹œ ì‚¬ìš©ìê°€ ì„ íƒí•œ ì¡°ê±´ì˜ ì¡°í•©ì— ë”°ë¥¸ ì¿¼ë¦¬ ì ìš© ë°©ë²• ê³ ë¯¼

<br>

> **ë¬¸ì œ: ì—¬ëŸ¬ ì¡°ê±´ ì¤‘ ì¼ë¶€ ì¡°ê±´ë§Œ ì„ íƒí–ˆì„ ì‹œ ì–´ë–»ê²Œ ì²˜ë¦¬í•  ê²ƒì¸ê°€?**

ê²€ìƒ‰ ì‹œ **êµ­ê°€, ì—¬í–‰ì‚¬, ì¶œë°œ - ë„ì°© ë‚ ì§œ, ê°€ê²©** ì¡°ê±´ì„ ì¶”ê°€ 

```
ex) ì¡°ê±´ì˜ ì¡°í•©
ì¡°ê±´ 1ê°œ : (êµ­ê°€), (ì—¬í–‰ì‚¬), (ë‚ ì§œ), (ê°€ê²©) â‡’ **4**
ì¡°ê±´ 2ê°œ : (êµ­ê°€,ì—¬í–‰ì‚¬), (êµ­ê°€, ë‚ ì§œ), (êµ­ê°€, ê°€ê²©), (ì—¬í–‰ì‚¬, ë‚ ì§œ), (ì—¬í–‰ì‚¬, ê°€ê²©), (ë‚ ì§œ, ê°€ê²©) â‡’ **6**
ì¡°ê±´ 3ê°œ : (êµ­ê°€, ì—¬í–‰ì‚¬, ë‚ ì§œ), (êµ­ê°€, ì—¬í–‰ì‚¬, ê°€ê²©), (êµ­ê°€, ë‚ ì§œ, ê°€ê²©), (ì—¬í–‰ì‚¬, ë‚ ì§œ, ê°€ê²©) â‡’ **4**
ì¡°ê±´ 4ê°œ : (êµ­ê°€, ì—¬í–‰ì‚¬, ë‚ ì§œ, ê°€ê²©) â‡’ **1**

**4 + 6 + 4 + 1 = 15**
...

â‡’ ë‹¤ì–‘í•œ **ê²½ìš°ì˜ ìˆ˜(15ê°€ì§€)**ì— ê°ê° í•´ë‹¹í•˜ëŠ” **ì¡°ê±´ë¬¸**ê³¼ **ì¿¼ë¦¬**ë¥¼ ëª¨ë‘ ë§Œë“¤ì–´ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ **ë§¤ìš° ë¹„íš¨ìœ¨ì **ì´ë‹¤.
```

<br>

> **í•´ê²°: SQL ì¿¼ë¦¬ ë‚´ì—ì„œ ì•„ë˜ì™€ ê°™ì€ ì½”ë“œ ê¸°ë²• ì‚¬ìš©**

```sql
SELECT *
  FROM item i
WHERE MATCH(i.name) AGAINST(:search IN BOOLEAN MODE)
    AND (COALESCE(:countries) IS NULL OR country IN (:countries))
    AND (COALESCE(:travelAgencies) IS NULL OR travel_agency_id IN (:travelAgencies))
    AND (:startDate IS NULL OR (DATE(departure_time) = :startDate AND DATE(arrival_time) = :endDate))
    AND (:priceValue IS NULL OR ((:priceAbove = true AND :priceValue <= discount_price) OR (:priceAbove = false AND :priceValue >= discount_price)))
ORDER BY i.id DESC
```

`ì¡°ê±´ê°’ IS NULL OR ì»¬ëŸ¼ IN(ì¡°ê±´ê°’)` ê¸°ë²• ì´ìš©

ì‚¬ìš©ìê°€ ì¡°ê±´ì„ ì„ íƒí•˜ì§€ ì•Šì•˜ì„ ê²½ìš° - í”„ë¡ íŠ¸ì—”ë“œë¡œë¶€í„° NULLê°’ì„ ì „ë‹¬ ë°›ì•„ **ì¡°ê±´ì„ TRUEë¡œ ë§Œë“¤ì–´** í•´ë‹¹ ì¡°ê±´ì´ ì‹¤í–‰ë˜ì§€ ì•ŠìŒ

ì‚¬ìš©ìê°€ ì¡°ê±´ì„ ì„ íƒí•œ ê²½ìš° - í”„ë¡ íŠ¸ì—”ë“œë¡œë¶€í„° ì¡°ê±´ ê°’ì„ ì „ë‹¬ ë°›ì•„ **ì‘ì„±í•œ ì¡°ê±´ ì¿¼ë¦¬ë¥¼ ìˆ˜í–‰**

**â‡’ í•˜ë‚˜ì˜ ì¿¼ë¦¬ë¡œ ëª¨ë“  ê²½ìš°ì˜ ìˆ˜ë¥¼ ì²˜ë¦¬**

<br>

### 2. ë™ì‹œì„± ì œì–´ : í•œì • ìƒí’ˆ ë™ì‹œ ì£¼ë¬¸ì— ëŒ€í•œ ë°ì´í„° ì •í™•ì„± í™•ë³´

<br>

> **ë¬¸ì œ: ì—¬ëŸ¬ ê³ ê°ì´ ì—¬í–‰ìƒí’ˆì„ ë™ì‹œ êµ¬ë§¤ ì‹œ, íŒ”ë¦° ì•„ì´í…œ ê°œìˆ˜ â‰  êµ¬ë§¤ëœ ì•„ì´í…œ ê°œìˆ˜ ë°ì´í„° ë¶ˆì¼ì¹˜ ë¬¸ì œ ë°œìƒ**

í…ŒìŠ¤íŠ¸ ì¡°ê±´ : 1,000ëª…ì´ ë™ì‹œ êµ¬ë§¤ ìš”ì²­, ìˆ˜ëŸ‰ : 100ê°œ

|ë‚¨ì€ Item ìˆ˜ëŸ‰ ì²´í¬|êµ¬ë§¤ ê°œìˆ˜ ì²´í¬|
|---|---|
|![image](https://github.com/Tour-Ranger/Tour-Ranger-Back/assets/130378232/733238ac-e583-4837-ba3c-6e8e7f48b508)|![image](https://github.com/Tour-Ranger/Tour-Ranger-Back/assets/130378232/0b73b4db-54f0-471d-9437-f026cfdbba3d)|
|expected: <0> but was: <6><br>Expected: 0<br>Actual: 6|expected: <100> but was <936><br>Expected: 100<br>Actual: 936|

1000ëª…ì´ ìƒí’ˆ ì£¼ë¬¸ì„ ìš”ì²­í–ˆì„ ë•Œ ì•„ì´í…œ í˜„ì¬ ìˆ˜ëŸ‰ê³¼ êµ¬ë§¤ ê°œìˆ˜ì˜ ì˜ˆìƒ ê°’ì´ ë‹¤ë¦„. â‡’ **ë°ì´í„° ë¶ˆì¼ì¹˜**

> **í•´ê²°: ë¹„ê´€ì  ë½ ì‚¬ìš©**

* ë°ì´í„° ì¼ê´€ì„±ì„ ë³´ì¥í•˜ëŠ” ë° íš¨ê³¼ì ì´ê³  ì½”ë“œê°€ ê°„ê²°í•´ ê´€ë¦¬í•˜ê¸° ì‰¬ìš´ ë¹„ê´€ì  ë½ ì‚¬ìš©
* í…ŒìŠ¤íŠ¸ 1: `1,000ëª…`ì´ ë™ì‹œ êµ¬ë§¤ ìš”ì²­, Item ìˆ˜ëŸ‰: 100ê°œ, Thread: 32 => í†µê³¼
![image](https://github.com/Tour-Ranger/Tour-Ranger-Back/assets/130378232/2ebe1345-f420-464f-b0ea-f77148295cb4)

* í…ŒìŠ¤íŠ¸ 2: `5,000ëª…`ì´ ë™ì‹œ êµ¬ë§¤ ìš”ì²­, Item ìˆ˜ëŸ‰: 100ê°œ, Thread: 32 => í†µê³¼
![image](https://github.com/Tour-Ranger/Tour-Ranger-Back/assets/130378232/7c25993b-1fed-4992-be83-ca9cbfdd130e)

**ê°œì„  ê²°ê³¼ : ë™ì‹œ ì£¼ë¬¸ ìš”ì²­ì— ëŒ€í•´ ë°ì´í„° ì •í™•ì„± í™•ë³´**

<br>

### 3. ë©€í‹°ìŠ¤ë ˆë“œ ì‚¬ìš©ìœ¼ë¡œ CPU ì‚¬ìš©ë¥ (%) ê°œì„ 

<br>



### 4. ë‹¤ì¤‘ ì„œë²„ì—ì„œ ì„¸ì…˜ ê´€ë¦¬

### 5. AWS ë°°í¬ ì„œë²„ ì¤‘ë‹¨ ë¬¸ì œ


<br>

## ì„±ëŠ¥ ê°œì„ 



<br>

## ë°ì´í„° ì¶œì²˜

* [ë‹¤ë‚˜ì™€ ì—¬í–‰](https://tour.danawa.com/?logger_kw=dnw_gnb_tour)ì—ì„œ í¬ë¡¤ë§
* í¬ë¡¤ë§ ì½”ë“œ ë³´ëŸ¬ê°€ê¸° -> [Tour-Ranger-Crawling GitHub Repository](https://github.com/Tour-Ranger/Tour-Ranger-Crawling)
